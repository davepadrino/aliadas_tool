<!DOCTYPE html>
<html ng-app="myApp">

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.js"></script>
    <script src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-2.0.0.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>

<body >
<div class="container">
    <div ng-controller="ListController as listCtrl">
        <h1>Brands List</h1>
        <table class="table" ng-if="listCtrl.brands.length">
            <thead>
                <th>Name</th>
                <th colspan="2">Last Name</th>
            </thead>
            <tbody>
                <tr ng-repeat="brand in listCtrl.brands">
                    <td ng-bind="brand.name"></td>
                    <td ng-bind="brand.lastName"></td>
                    <td class="text-right"><button class="btn glyphicon glyphicon-remove" ng-click="listCtrl.removeBrand($index)"></button></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- MODAL -->
    <div ng-controller="FormController as formCtrl">
            <form ng-submit="formCtrl.submitForm()">
                    <table id="form">
                        <tr>
                            <td>
                                <label for="name">Nombre</label>
                                <input type="text" class="form-control" name="name" placeholder="Nombre" ng-model="formCtrl.form.name" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="apellido">Apellido</label>
                                <input type="text" class="form-control" name="apellido" placeholder="Apellido" ng-model="formCtrl.form.lastName" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="address">Dirección</label>
                                <input type="text" class="form-control" name="address" placeholder="Dirección">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="numTel">Número Telefónico</label>
                                <input type="text" class="form-control" name="numTel" placeholder="04XXYYYYYYY">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="Email">Email</label>
                                <input type="email" class="form-control" name="email" placeholder="correo@dominio.com">
                            </td>
                        </tr>
                    </table>
                <!--
                <button class="btn btn-primary" type="submit" ng-click="ok()">Guardar</button>
                -->
                <input class="btn btn-success" type="Submit" value="Add Brand" />
                </form>
        </div>


    <!-- 

    <div ng-controller="FormController as formCtrl">
        <h1>Add Brand</h1>
        <form name="registerForm" ng-submit="formCtrl.submitForm()">            
            <input class="form-control" ng-model="formCtrl.form.name" placeholder="Brand Name" />
            <br />
            <input class="form-control" ng-model="formCtrl.form.lastName" placeholder="Brand Type" />
            <br />
            <input class="btn btn-success" type="Submit" value="Add Brand" />
        </form>
    </div>
</div>
    -->
</body>

<script>

var app = angular.module("myApp", [])
//var app = angular.module("myApp", ['ngAnimate', 'ui.bootstrap'])
.controller("FormController", ["$http", "BrandService", function($http, BrandService){
     var ctrl = this;
    
    ctrl.form = {
        name: "",
        lastName: ""
    };
    
    ctrl.submitForm = function(){
        $http
            //.post("/admin.brands/update", ctrl.form)
            .post("", ctrl.form)
            .then(function(resp){
                console.log(resp);
                
                // Example to update the brand service
                BrandService.add(ctrl.form);
                ctrl.form = {
                    name: "",
                    lastName: ""
                };
                // when successfully submitted
                
            }, function(err){
                console.log(err);
                
                // Not supposed to do this here, but just to Example updating the brand service
                BrandService.add(ctrl.form);
                ctrl.form = {
                    name: "",
                    lastName: ""
                };
                // When got some error
            });
    };
}])
.controller("ListController", ["$http", "BrandService", function($http, BrandService){
    var ctrl = this;
    
    ctrl.brands = BrandService.get();
    ctrl.removeBrand = BrandService.remove;
}])
.factory("BrandService", function(){
    var brandList = [{
        name: "Facebook",
        lastName: "Social"
    }, {
        name: "Flipkart",
        lastName: "E-commerce"
    }];
    
    return {
        get: function(){
            return brandList;
        },
        add: function(newBrand){
            brandList.push(newBrand);
        },
        remove: function(index){
            brandList.splice(index, 1);
        }
    };
});
// WHEN WE FINISH ADDING CONTROLLERS WE MUST SET AT THE END A ';'

angular.bootstrap(document, ['myApp']);



















/*
var demo = angular.module('myModule', []);

demo.controller('fessCntrl', function ($scope) {    
});

demo.$inject = ['$scope'];
demo.directive("boxCreator", function($compile){   
    return{
        restrict: 'A',
        link: function(scope , element){        
            element.bind("click", function(e){
                var childNode = $compile($('#alumnForm').clone())(scope);
                $('#agregar_alumno').before(childNode);
               // element.parent().append(childNode);
               
                //$('body').append($compile($('.form-group').clone())($scope));
                
           });

        }
    }
   });
*/
</script>


</html>